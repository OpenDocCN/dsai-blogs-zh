# æ—¶é—´åºåˆ—ä¸­çš„å¼‚å¸¸æ£€æµ‹

> åŸæ–‡ï¼š<https://web.archive.org/web/https://neptune.ai/blog/anomaly-detection-in-time-series>

æ—¶é—´åºåˆ—æ— å¤„ä¸åœ¨ï¼ç½‘ç«™ä¸Šçš„ç”¨æˆ·è¡Œä¸ºï¼Œæˆ–è´¢å¯Œ 500 å¼ºå…¬å¸çš„è‚¡ç¥¨ä»·æ ¼ï¼Œæˆ–ä»»ä½•å…¶ä»–ä¸æ—¶é—´ç›¸å…³çš„ä¾‹å­ã€‚æ—¶é—´åºåˆ—æ•°æ®åœ¨æ¯ä¸ªè¡Œä¸šä¸­éƒ½ä»¥æŸç§å½¢å¼å­˜åœ¨ã€‚

è‡ªç„¶ï¼Œå®ƒä¹Ÿæ˜¯ç ”ç©¶æœ€å¤šçš„æ•°æ®ç±»å‹ä¹‹ä¸€ã€‚æ ¹æ®ç»éªŒï¼Œæ‚¨å¯ä»¥è¯´æ—¶é—´åºåˆ—æ˜¯ä¸€ç§åŸºäºæŸç§æ—¶é—´ç›¸å…³ç»´åº¦(å¦‚å¹´ã€æœˆæˆ–ç§’)è¿›è¡Œé‡‡æ ·çš„æ•°æ®ã€‚

> æ—¶é—´åºåˆ—æ˜¯ä»¥æœ‰åºçš„æ–¹å¼è®°å½•çš„å¹¶ä¸”åœ¨æ—¶é—´ä¸Šç›¸å…³çš„è§‚å¯Ÿç»“æœã€‚

åœ¨åˆ†ææ—¶é—´åºåˆ—æ•°æ®æ—¶ï¼Œæˆ‘ä»¬å¿…é¡»ç¡®å®šå¼‚å¸¸å€¼ï¼Œå°±åƒæˆ‘ä»¬åœ¨é™æ€æ•°æ®ä¸­æ‰€åšçš„ä¸€æ ·ã€‚å¦‚æœæ‚¨æ›¾ç»ä»¥ä»»ä½•èº«ä»½å¤„ç†è¿‡æ•°æ®ï¼Œæ‚¨å°±ä¼šçŸ¥é“å¼‚å¸¸å€¼ä¼šç»™åˆ†æå¸ˆå¸¦æ¥å¤šå¤§çš„ç—›è‹¦ã€‚è¿™äº›å¼‚å¸¸å€¼åœ¨æ—¶é—´åºåˆ—è¡Œè¯ä¸­è¢«ç§°ä¸ºâ€œå¼‚å¸¸â€ã€‚

## æ—¶åºæ•°æ®ä¸­çš„å¼‚å¸¸/å¼‚å¸¸å€¼å’Œå¼‚å¸¸ç±»å‹æ˜¯ä»€ä¹ˆï¼Ÿ

ä»ä¼ ç»Ÿçš„è§‚ç‚¹æ¥çœ‹ï¼Œç¦»ç¾¤å€¼/å¼‚å¸¸å€¼æ˜¯:

> "ä¸€ä¸ªä¸å…¶ä»–è§‚æµ‹ç»“æœç›¸å·®å¾ˆå¤§çš„è§‚æµ‹ç»“æœï¼Œä»¥è‡³äºè®©äººæ€€ç–‘å®ƒæ˜¯ç”±ä¸åŒçš„æœºåˆ¶äº§ç”Ÿçš„ã€‚"

å› æ­¤ï¼Œæ‚¨å¯ä»¥å°†å¼‚å¸¸å€¼è§†ä¸ºä¸ç¬¦åˆé¢„æœŸè¡Œä¸ºçš„è§‚å¯Ÿå€¼ã€‚

å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œæ—¶é—´åºåˆ—ä¸­çš„å¼‚å¸¸å€¼å¯èƒ½æœ‰ä¸¤ç§ä¸åŒçš„å«ä¹‰ã€‚å®ƒä»¬ä¹‹é—´çš„è¯­ä¹‰åŒºåˆ«ä¸»è¦åŸºäºä½ ä½œä¸ºåˆ†æå¸ˆçš„å…´è¶£ï¼Œæˆ–è€…ç‰¹å®šçš„åœºæ™¯ã€‚

è¿™äº›è§‚å¯Ÿç»“æœä¸å™ªå£°ã€é”™è¯¯æˆ–ä¸éœ€è¦çš„æ•°æ®æœ‰å…³ï¼Œè¿™äº›æ•°æ®æœ¬èº«å¯¹åˆ†æå¸ˆæ¥è¯´å¹¶ä¸æœ‰è¶£ã€‚åœ¨è¿™äº›æƒ…å†µä¸‹ï¼Œåº”åˆ é™¤æˆ–çº æ­£å¼‚å¸¸å€¼ä»¥æé«˜æ•°æ®è´¨é‡ï¼Œå¹¶ç”Ÿæˆå¯ç”±å…¶ä»–æ•°æ®æŒ–æ˜ç®—æ³•ä½¿ç”¨çš„æ›´æ¸…æ™°çš„æ•°æ®é›†ã€‚ä¾‹å¦‚ï¼Œæ¶ˆé™¤ä¼ æ„Ÿå™¨ä¼ è¾“è¯¯å·®ä»¥è·å¾—æ›´å‡†ç¡®çš„é¢„æµ‹ï¼Œå› ä¸ºä¸»è¦ç›®æ ‡æ˜¯è¿›è¡Œé¢„æµ‹ã€‚

ç„¶è€Œï¼Œè¿‘å¹´æ¥â€”â€”ç‰¹åˆ«æ˜¯åœ¨æ—¶é—´åºåˆ—æ•°æ®é¢†åŸŸâ€”â€”è®¸å¤šç ”ç©¶äººå‘˜è‡´åŠ›äºæ£€æµ‹å’Œåˆ†æä¸å¯»å¸¸ä½†æœ‰è¶£çš„ç°è±¡ã€‚*æ¬ºè¯ˆæ£€æµ‹*å°±æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­â€”â€”ä¸»è¦ç›®æ ‡æ˜¯æ£€æµ‹å’Œåˆ†æå¼‚å¸¸å€¼æœ¬èº«ã€‚è¿™äº›è§‚å¯Ÿç»“æœé€šå¸¸è¢«ç§°ä¸ºå¼‚å¸¸ã€‚

æ—¶é—´åºåˆ—çš„å¼‚å¸¸æ£€æµ‹é—®é¢˜é€šå¸¸è¢«å…¬å¼åŒ–ä¸º*è¯†åˆ«ç›¸å¯¹äºæŸç§è§„èŒƒæˆ–é€šå¸¸ä¿¡å·*çš„å¼‚å¸¸æ•°æ®ç‚¹ã€‚çœ‹çœ‹ä¸€äº›å¼‚å¸¸ç±»å‹:

è®©æˆ‘ä»¬é€ä¸€åˆ†æä¸€ä¸‹:

### ç‚¹å¼‚å¸¸å€¼

ç‚¹å¼‚å¸¸å€¼æ˜¯åœ¨ç‰¹å®šæ—¶é—´å®ä¾‹ä¸­ä¸æ—¶é—´åºåˆ—ä¸­çš„å…¶ä»–å€¼(å…¨å±€å¼‚å¸¸å€¼)æˆ–ä¸å…¶ç›¸é‚»ç‚¹(å±€éƒ¨å¼‚å¸¸å€¼)ç›¸æ¯”è¡¨ç°å¼‚å¸¸çš„æ•°æ®ã€‚

ä¾‹å­:ä½ çŸ¥é“ Gamestop ç‹‚æ½®å—ï¼Ÿè®¸å¤šå¹´è½»çš„æ•£æˆ·æŠ•èµ„è€…è´­ä¹° GME è‚¡ç¥¨ï¼Œä»¥æŠ¥å¤å¤§å‹å¯¹å†²åŸºé‡‘ï¼Œæ¨åŠ¨è‚¡ä»·å¤§å¹…ä¸Šæ¶¨ã€‚ç”±äºä¸å¤ªå¯èƒ½çš„äº‹ä»¶è€Œå‡ºç°çš„çªç„¶ã€çŸ­æš‚çš„å³°å€¼æ˜¯ä¸€ä¸ª**é™„åŠ (ç‚¹)å¼‚å¸¸å€¼ã€‚**åŸºäºæ—¶é—´çš„å€¼åœ¨çŸ­æ—¶é—´å†…çš„æ„å¤–å¢é•¿(çœ‹èµ·æ¥åƒçªç„¶çš„å³°å€¼)å±äºåŠ æ€§å¼‚å¸¸å€¼ã€‚

![Time series point outlier](img/93a8a7331641f241d3b65f0e5254944c.png)

*Source: Google*

ç‚¹å¼‚å¸¸å€¼å¯ä»¥æ˜¯*å•å˜é‡*æˆ–*å¤šå˜é‡*ï¼Œè¿™å–å†³äºå®ƒä»¬æ˜¯å¦åˆ†åˆ«å½±å“ä¸€ä¸ªæˆ–å¤šä¸ªæ—¶é—´ç›¸å…³å˜é‡ã€‚

å›¾ 1a åŒ…å«ä¸¤ä¸ªå•å˜é‡ç‚¹å¼‚å¸¸å€¼ O1 å’Œ O2ï¼Œè€Œå¤šå˜é‡æ—¶é—´åºåˆ—ç”±å›¾ 3b ä¸­çš„ä¸‰ä¸ªå˜é‡ç»„æˆï¼Œå¹¶ä¸”å…·æœ‰å•å˜é‡(O3)å’Œå¤šå˜é‡(O1 å’Œ O2)ç‚¹å¼‚å¸¸å€¼ã€‚

![Point outliers in time series](img/4ba1487f21c636315e063a2c350da188.png)

*Fig: 1â€Šâ€”â€ŠPoint outliers in time series data. | [Source](https://web.archive.org/web/20220928190227/https://arxiv.org/pdf/2002.04236.pdf)*

æˆ‘ä»¬å°†åœ¨å¼‚å¸¸æ£€æµ‹éƒ¨åˆ†æ›´æ·±å…¥åœ°ç ”ç©¶å•å˜é‡ç‚¹å¼‚å¸¸å€¼ã€‚

### åç»­å¼‚å¸¸å€¼

è¿™æ„å‘³ç€è¿ç»­çš„æ—¶é—´ç‚¹ï¼Œå…¶è”åˆè¡Œä¸ºæ˜¯ä¸å¯»å¸¸çš„ï¼Œå°½ç®¡æ¯ä¸ªå•ç‹¬çš„è§‚å¯Ÿä¸ä¸€å®šæ˜¯ç‚¹å¼‚å¸¸å€¼ã€‚å­åºåˆ—å¼‚å¸¸å€¼ä¹Ÿå¯ä»¥æ˜¯å…¨å±€çš„æˆ–å±€éƒ¨çš„ï¼Œå¹¶ä¸”å¯ä»¥å½±å“ä¸€ä¸ª(å•å˜é‡å­åºåˆ—å¼‚å¸¸å€¼)æˆ–å¤šä¸ª(å¤šå˜é‡å­åºåˆ—å¼‚å¸¸å€¼)æ—¶é—´ç›¸å…³å˜é‡ã€‚

å›¾ 2 æä¾›äº†å•å˜é‡(å›¾ 2a ä¸­çš„ O1 å’Œ O2ï¼Œä»¥åŠå›¾ 2b ä¸­çš„ O3)å’Œå¤šå˜é‡(å›¾ 2b ä¸­çš„ O1 å’Œ O2)å­åºåˆ—å¼‚å¸¸å€¼çš„ç¤ºä¾‹ã€‚æ³¨æ„ï¼Œåè€…ä¸ä¸€å®šå½±å“æ‰€æœ‰å˜é‡(ä¾‹å¦‚ï¼Œå›¾ 2b ä¸­çš„ O2)ã€‚

![â€ŠSubsequence outliers in time series ](img/276897424ef680b19ca165bc6b7562ad.png)

*Fig: 2â€Šâ€”â€ŠSubsequence outliers in time series data. | [Source](https://web.archive.org/web/20220928190227/https://arxiv.org/pdf/2002.04236.pdf)*

## æ—¶é—´åºåˆ—æ•°æ®ä¸­çš„å¼‚å¸¸æ£€æµ‹æŠ€æœ¯

åˆ†æå¸ˆå¯ä»¥ç”¨æ¥è¯†åˆ«æ•°æ®ä¸­ä¸åŒå¼‚å¸¸çš„æŠ€æœ¯å¾ˆå°‘ã€‚å®ƒä»ä¸€ä¸ªåŸºæœ¬çš„ç»Ÿè®¡åˆ†è§£å¼€å§‹ï¼Œä¸€ç›´åˆ°è‡ªåŠ¨ç¼–ç å™¨ã€‚è®©æˆ‘ä»¬ä»æœ€åŸºæœ¬çš„å¼€å§‹ï¼Œç†è§£å®ƒå¦‚ä½•ä»¥åŠä¸ºä»€ä¹ˆæœ‰ç”¨ã€‚

### æ³¨æ„

ğŸ“„åœ¨è¿™é‡Œä½ å¯ä»¥æ‰¾åˆ° [ç¬”è®°æœ¬](https://web.archive.org/web/20220928190227/https://app.neptune.ai/theaayushbajaj/Anomaly-Detection/n/49ba1752-fc3a-4abb-b35f-0e2ea4fd4afa/48dc19d8-3c75-4989-a2c0-67839393a093) ä»¥åŠæ–‡ç« ä¸­ç”¨åˆ°çš„ [æ•°æ®](https://web.archive.org/web/20220928190227/https://drive.google.com/drive/folders/1vsLzhpgNbVPsYvBIFNI_20S3LRZuNYhz?usp=sharing)

### STL åˆ†è§£

[STL](https://web.archive.org/web/20220928190227/http://www.wessa.net/download/stl.pdf) ä»£è¡¨åŸºäºé»„åœŸçš„å­£èŠ‚è¶‹åŠ¿åˆ†è§£ç¨‹åºã€‚è¿™ç§æŠ€æœ¯è®©ä½ èƒ½å¤Ÿå°†ä½ çš„æ—¶é—´åºåˆ—ä¿¡å·åˆ†æˆä¸‰ä¸ªéƒ¨åˆ†:**ã€å­£èŠ‚ã€è¶‹åŠ¿å’Œæ®‹å·®**ã€‚

å®ƒé€‚ç”¨äºå­£èŠ‚æ€§æ—¶é—´åºåˆ—ï¼Œè¿™ä¹Ÿæ˜¯æœ€æµè¡Œçš„æ—¶é—´åºåˆ—æ•°æ®ç±»å‹ã€‚è¦ç”Ÿæˆ STL åˆ†è§£å›¾ï¼Œæˆ‘ä»¬åªéœ€ä½¿ç”¨ä»¤äººæƒŠå¹çš„ *statsmodels* æ¥å®Œæˆç¹é‡çš„å·¥ä½œã€‚

```py
plt.rc('figure',figsize=(12,8))
plt.rc('font',size=15)
result = seasonal_decompose(lim_catfish_sales,model='additive')
fig = result.plot()
```

![STL decomposition](img/eedb7d13fbcb80cceff424ea8956e633.png)

*This is Catfish sales data from 1996â€“2000 with an anomaly introduced in Dec-1998*

å¦‚æœæˆ‘ä»¬åˆ†æ**æ®‹å·®**çš„åå·®å¹¶ä¸ºå…¶å¼•å…¥ä¸€äº›é˜ˆå€¼ï¼Œæˆ‘ä»¬å°†å¾—åˆ°ä¸€ä¸ªå¼‚å¸¸æ£€æµ‹ç®—æ³•ã€‚ä¸ºäº†å®ç°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬åªéœ€è¦æ¥è‡ªåˆ†è§£çš„å‰©ä½™æ•°æ®ã€‚

```py
plt.rc('figure',figsize=(12,6))
plt.rc('font',size=15)
fig, ax = plt.subplots()
x = result.resid.index
y = result.resid.values
ax.plot_date(x, y, color='black',linestyle='--')
ax.annotate('Anomaly', (mdates.date2num(x[35]), y[35]), xytext=(30, 20),
          textcoords='offset points', color='red',arrowprops=dict(facecolor='red',arrowstyle='fancy'))
fig.autofmt_xdate()
plt.show()
```

![Residue from STL decomposition](img/9448b99c956331664f2526a1861ee17c.png)

*Residue from the above STL decomposition*

***åˆ©å¼Š***

å®ƒç®€å•ï¼Œå¥å£®ï¼Œå¯ä»¥å¤„ç†å¾ˆå¤šä¸åŒçš„æƒ…å†µï¼Œæ‰€æœ‰çš„å¼‚å¸¸ä»ç„¶å¯ä»¥è¢«ç›´è§‚çš„è§£é‡Šã€‚

***ç¼ºç‚¹***

è¿™ç§æŠ€æœ¯æœ€å¤§çš„ç¼ºç‚¹æ˜¯åƒµç¡¬çš„è°ƒæ•´é€‰é¡¹ã€‚é™¤äº†é˜ˆå€¼å’Œå¯èƒ½çš„ç½®ä¿¡åŒºé—´ä¹‹å¤–ï¼Œä½ å¯¹æ­¤æ— èƒ½ä¸ºåŠ›ã€‚ä¾‹å¦‚ï¼Œæ‚¨æ­£åœ¨è·Ÿè¸ªç½‘ç«™ä¸Šçš„ç”¨æˆ·ï¼Œè¯¥ç½‘ç«™å¯¹å…¬ä¼—å…³é—­ï¼Œç„¶åçªç„¶å¼€æ”¾ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ‚¨åº”è¯¥åˆ†åˆ«è·Ÿè¸ªå¯åŠ¨æœŸå‰åå‘ç”Ÿçš„å¼‚å¸¸æƒ…å†µã€‚

### åˆ†ç±»å’Œå›å½’æ ‘

æˆ‘ä»¬å¯ä»¥åˆ©ç”¨å†³ç­–æ ‘çš„èƒ½åŠ›å’Œå¥å£®æ€§æ¥è¯†åˆ«æ—¶é—´åºåˆ—æ•°æ®ä¸­çš„å¼‚å¸¸å€¼/å¼‚å¸¸ã€‚

*   é¦–å…ˆï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ç›‘ç£å­¦ä¹ æ¥æ•™ä¼šæ ‘å¯¹å¼‚å¸¸å’Œéå¼‚å¸¸æ•°æ®ç‚¹è¿›è¡Œåˆ†ç±»ã€‚ä¸ºäº†åšåˆ°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬éœ€è¦æ ‡è®°å¼‚å¸¸æ•°æ®ç‚¹ï¼Œè¿™åœ¨ç©å…·æ•°æ®é›†ä¹‹å¤–æ˜¯ä¸å¸¸è§çš„ã€‚
*   æ— äººç›‘ç®¡æ‰æ˜¯ä½ éœ€è¦çš„ï¼æˆ‘ä»¬å¯ä»¥ä½¿ç”¨éš”ç¦»æ£®æ—ç®—æ³•æ¥é¢„æµ‹æŸä¸ªç‚¹æ˜¯å¦æ˜¯ç¦»ç¾¤ç‚¹ï¼Œè€Œä¸éœ€è¦ä»»ä½•æ ‡è®°æ•°æ®é›†çš„å¸®åŠ©ã€‚è®©æˆ‘ä»¬çœ‹çœ‹æ€ä¹ˆåšã€‚

ä¸å…¶ä»–æµè¡Œçš„ç¦»ç¾¤ç‚¹æ£€æµ‹æ–¹æ³•ä¸åŒï¼Œéš”ç¦»æ—çš„ä¸»è¦æ€æƒ³æ˜¯æ˜¾å¼è¯†åˆ«å¼‚å¸¸ï¼Œè€Œä¸æ˜¯åˆ†ææ­£å¸¸æ•°æ®ç‚¹ã€‚åƒä»»ä½•æ ‘é›†åˆæ–¹æ³•ä¸€æ ·ï¼Œéš”ç¦»æ£®æ—æ˜¯åŸºäºå†³ç­–æ ‘çš„ã€‚

æ¢å¥è¯è¯´ï¼Œ[éš”ç¦»æ—](https://web.archive.org/web/20220928190227/https://scikit-learn.org/stable/modules/generated/sklearn.ensemble.IsolationForest.html)çº¯ç²¹åŸºäºå¼‚å¸¸æ˜¯å¾ˆå°‘ä¸”ä¸åŒçš„æ•°æ®ç‚¹è¿™ä¸€äº‹å®æ¥æ£€æµ‹å¼‚å¸¸ã€‚å¼‚å¸¸éš”ç¦»æ˜¯åœ¨ä¸é‡‡ç”¨ä»»ä½•è·ç¦»æˆ–å¯†åº¦æµ‹é‡çš„æƒ…å†µä¸‹å®ç°çš„ã€‚

*   å½“åº”ç”¨ä¸€ä¸ª [IsolationForest](https://web.archive.org/web/20220928190227/https://scikit-learn.org/stable/modules/generated/sklearn.ensemble.IsolationForest.html) æ¨¡å‹æ—¶ï¼Œæˆ‘ä»¬è®¾ç½®æ±¡æŸ“=ç¦»ç¾¤å€¼ _ åˆ†æ•°ï¼Œä¹Ÿå°±æ˜¯å‘Šè¯‰æ¨¡å‹æ•°æ®ä¸­ç¦»ç¾¤å€¼çš„æ¯”ä¾‹ã€‚è¿™æ˜¯ä¸€ä¸ªè¯•é”™æŒ‡æ ‡ã€‚
*   æ‹Ÿåˆå’Œé¢„æµ‹(æ•°æ®)å¯¹æ•°æ®æ‰§è¡Œå¼‚å¸¸å€¼æ£€æµ‹ï¼Œè¿”å› 1 è¡¨ç¤ºæ­£å¸¸ï¼Œ-1 è¡¨ç¤ºå¼‚å¸¸ã€‚
*   æœ€åï¼Œæˆ‘ä»¬ç”¨æ—¶é—´åºåˆ—è§†å›¾å¯è§†åŒ–å¼‚å¸¸ã€‚

è®©æˆ‘ä»¬ä¸€æ­¥ä¸€æ­¥æ¥ã€‚é¦–å…ˆï¼Œå¯è§†åŒ–æ—¶é—´åºåˆ—æ•°æ®:

```py
plt.rc('figure',figsize=(12,6))
plt.rc('font',size=15)
catfish_sales.plot()
```

![Time series anomalies](img/e0faf42a3adbcdb5670ff0baa6da41cc.png)

*The same Catfish Sales data but with different (multiple) anomalies introduced*

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦è®¾ç½®ä¸€äº›å‚æ•°ï¼Œå¦‚ç¦»ç¾¤åˆ†æ•°ï¼Œå¹¶è®­ç»ƒæˆ‘ä»¬çš„ IsolationForest æ¨¡å‹ã€‚æˆ‘ä»¬å¯ä»¥åˆ©ç”¨è¶…çº§æœ‰ç”¨çš„ scikit-learn æ¥å®ç°éš”ç¦»æ£®æ—ç®—æ³•ã€‚ä½ å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°åŒ…å«ä»£ç å’Œå…¶ä»–ä¸œè¥¿[çš„å®Œæ•´ç¬”è®°æœ¬ã€‚](https://web.archive.org/web/20220928190227/https://ui.neptune.ai/theaayushbajaj/Anomaly-Detection/n/Anomaly-Detection-49ba1752-fc3a-4abb-b35f-0e2ea4fd4afa)

### ç¨åé˜…è¯»

å¦‚ä½•ä½¿ç”¨ [Neptune-sklearn é›†æˆ](https://web.archive.org/web/20220928190227/https://docs.neptune.ai/integrations-and-supported-tools/model-training/sklearn)è·Ÿè¸ªæ‚¨çš„åˆ†ç±»å™¨ã€å›å½’å™¨å’Œ k å‡å€¼èšç±»ç»“æœ

```py
outliers_fraction = float(.01)
scaler = StandardScaler()
np_scaled = scaler.fit_transform(catfish_sales.values.reshape(-1, 1))
data = pd.DataFrame(np_scaled)

model =  IsolationForest(contamination=outliers_fraction)
model.fit(data)
```

æœ€åï¼Œæˆ‘ä»¬éœ€è¦æƒ³è±¡é¢„æµ‹æ˜¯æ€æ ·çš„ã€‚

```py
catfish_sales['anomaly'] = model.predict(data)

fig, ax = plt.subplots(figsize=(10,6))
a = catfish_sales.loc[catfish_sales['anomaly'] == -1, ['Total']] 
ax.plot(catfish_sales.index, catfish_sales['Total'], color='black', label = 'Normal')
ax.scatter(a.index,a['Total'], color='red', label = 'Anomaly')
plt.legend()
plt.show();
```

![Anomaly Detection Isolation Forest](img/518582578754fe93787b03a1298ecc8f.png)

*Anomaly Detection using Isolation Forest algo*rithm

å¦‚æ‚¨æ‰€è§ï¼Œè¯¥ç®—æ³•åœ¨è¯†åˆ«æˆ‘ä»¬æ¤å…¥çš„å¼‚å¸¸æ–¹é¢åšå¾—éå¸¸å¥½ï¼Œä½†å®ƒä¹Ÿåœ¨å¼€å§‹æ—¶å°†ä¸€äº›ç‚¹æ ‡è®°ä¸ºâ€œå¼‚å¸¸å€¼â€ã€‚è¿™æ˜¯ç”±äºä¸¤ä¸ªåŸå› :

*   ä¸€å¼€å§‹ï¼Œè¯¥ç®—æ³•å¾ˆå¤©çœŸï¼Œæ— æ³•ç†è§£ä»€ä¹ˆæ˜¯å¼‚å¸¸ã€‚å®ƒå¾—åˆ°çš„æ•°æ®è¶Šå¤šï¼Œå®ƒèƒ½çœ‹åˆ°çš„å·®å¼‚å°±è¶Šå¤šï¼Œå®ƒä¼šè‡ªæˆ‘è°ƒæ•´ã€‚
*   å¦‚æœä½ çœ‹åˆ°è®¸å¤šçœŸé˜´æ€§ï¼Œè¿™æ„å‘³ç€ä½ çš„**æ±¡æŸ“**å‚æ•°å¤ªé«˜ã€‚ç›¸åï¼Œå¦‚æœä½ æ²¡æœ‰çœ‹åˆ°çº¢ç‚¹åœ¨å®ƒä»¬åº”è¯¥åœ¨çš„åœ°æ–¹ï¼Œé‚£ä¹ˆ**æ±¡æŸ“**å‚æ•°è®¾ç½®å¾—å¤ªä½ã€‚

***åˆ©å¼Š***

è¿™ç§æŠ€æœ¯çš„æœ€å¤§ä¼˜ç‚¹æ˜¯ï¼Œæ‚¨å¯ä»¥å¼•å…¥ä»»æ„å¤šçš„éšæœºå˜é‡æˆ–ç‰¹æ€§æ¥åˆ›å»ºæ›´å¤æ‚çš„æ¨¡å‹ã€‚

***ç¼ºç‚¹***

ç¼ºç‚¹æ˜¯è¶Šæ¥è¶Šå¤šçš„ç‰¹æ€§ä¼šå¾ˆå¿«å½±å“ä½ çš„è®¡ç®—æ€§èƒ½ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ‚¨åº”è¯¥ä»”ç»†é€‰æ‹©åŠŸèƒ½ã€‚

### ä½¿ç”¨é¢„æµ‹çš„æ£€æµ‹

ä½¿ç”¨é¢„æµ‹çš„å¼‚å¸¸æ£€æµ‹åŸºäºè¿™æ ·ä¸€ç§æ–¹æ³•ï¼Œå³è¿‡å»çš„å‡ ä¸ªç‚¹é€šè¿‡æ·»åŠ ä¸€äº›éšæœºå˜é‡(é€šå¸¸æ˜¯ç™½å™ªå£°)æ¥ç”Ÿæˆä¸‹ä¸€ä¸ªç‚¹çš„é¢„æµ‹ã€‚

å¯ä»¥æƒ³è±¡ï¼Œæœªæ¥é¢„æµ‹çš„ç§¯åˆ†ä¼šäº§ç”Ÿæ–°çš„ç§¯åˆ†ç­‰ç­‰ã€‚å®ƒå¯¹é¢„æµ‹èŒƒå›´çš„æ˜æ˜¾å½±å“â€”â€”ä¿¡å·å˜å¾—æ›´åŠ å¹³æ»‘ã€‚

ä½¿ç”¨è¿™ç§æ–¹æ³•çš„éš¾ç‚¹åœ¨äºï¼Œæ‚¨åº”è¯¥é€‰æ‹©å·®å¼‚æ•°ã€è‡ªå›å½’æ•°å’Œé¢„æµ‹è¯¯å·®ç³»æ•°ã€‚

æ¯å¤„ç†ä¸€ä¸ªæ–°ä¿¡å·ï¼Œä½ éƒ½åº”è¯¥å»ºç«‹ä¸€ä¸ªæ–°çš„é¢„æµ‹æ¨¡å‹ã€‚

å¦ä¸€ä¸ªéšœç¢æ˜¯å·®åˆ†åä½ çš„ä¿¡å·åº”è¯¥æ˜¯å¹³ç¨³çš„ã€‚ç®€å•åœ°è¯´ï¼Œè¿™æ„å‘³ç€ä½ çš„ä¿¡å·ä¸åº”è¯¥ä¾èµ–äºæ—¶é—´ï¼Œè¿™æ˜¯ä¸€ä¸ªé‡è¦çš„é™åˆ¶ã€‚

æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ä¸åŒçš„é¢„æµ‹æ–¹æ³•ï¼Œå¦‚ç§»åŠ¨å¹³å‡çº¿ï¼Œè‡ªå›å½’æ–¹æ³•ï¼ŒARIMA åŠå…¶ä¸åŒçš„å˜ç§ã€‚ç”¨ ARIMA æ£€æµ‹å¼‚å¸¸çš„ç¨‹åºæ˜¯:

*   æ ¹æ®è¿‡å»çš„æ•°æ®é¢„æµ‹æ–°ç‚¹ï¼Œå¹¶æ‰¾å‡ºä¸è®­ç»ƒæ•°æ®ä¸­çš„å·®å€¼ã€‚
*   é€‰æ‹©ä¸€ä¸ªé˜ˆå€¼å¹¶åŸºäºè¯¥å·®å¼‚é˜ˆå€¼è¯†åˆ«å¼‚å¸¸ã€‚å°±æ˜¯è¿™æ ·ï¼

ä¸ºäº†æµ‹è¯•è¿™é¡¹æŠ€æœ¯ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨æ—¶é—´åºåˆ—ä¸­ä¸€ä¸ªæµè¡Œçš„æ¨¡å—ï¼Œåä¸º ***fbprophet*** *ã€‚*è¯¥æ¨¡å—ä¸“é—¨é’ˆå¯¹å¹³ç¨³æ€§å’Œå­£èŠ‚æ€§ï¼Œå¯ä»¥ä½¿ç”¨ä¸€äº›è¶…å‚æ•°è¿›è¡Œè°ƒæ•´ã€‚

![Multiple anomailies](img/c661f7d6f697eb92308fd922d0a69769.png)

*The same Catfish Sales data but with different (multiple) anomalies introduced*

æˆ‘ä»¬å°†åˆ©ç”¨ä¸ä¸Šè¿°ç›¸åŒçš„å¼‚å¸¸æ•°æ®ã€‚é¦–å…ˆï¼Œè®©æˆ‘ä»¬å¯¼å…¥å®ƒå¹¶ä¸ºç¯å¢ƒåšå¥½å‡†å¤‡:

```py
from fbprophet import Prophet
```

ç°åœ¨è®©æˆ‘ä»¬å®šä¹‰é¢„æµ‹å‡½æ•°ã€‚è¿™é‡Œéœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯ *fbprophet* å°†æ·»åŠ ä¸€äº›é¢å¤–çš„æŒ‡æ ‡ä½œä¸ºç‰¹æ€§ï¼Œä»¥ä¾¿æ›´å¥½åœ°è¯†åˆ«å¼‚å¸¸ã€‚ä¾‹å¦‚ï¼Œé¢„æµ‹çš„æ—¶é—´åºåˆ—å˜é‡(é€šè¿‡æ¨¡å‹)ã€ç›®æ ‡æ—¶é—´åºåˆ—å˜é‡çš„ä¸Šé™å’Œä¸‹é™ä»¥åŠè¶‹åŠ¿åº¦é‡ã€‚

```py
def fit_predict_model(dataframe, interval_width = 0.99, changepoint_range = 0.8):
   m = Prophet(daily_seasonality = False, yearly_seasonality = False, weekly_seasonality = False,
               seasonality_mode = 'additive',
               interval_width = interval_width,
               changepoint_range = changepoint_range)
   m = m.fit(dataframe)
   forecast = m.predict(dataframe)
   forecast['fact'] = dataframe['y'].reset_index(drop = True)
   return forecast

pred = fit_predict_model(t)
```

**æˆ‘ä»¬ç°åœ¨å¿…é¡»å°†*é¢„æµ‹*å˜é‡**æ¨é€åˆ°å¦ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°å°†åŸºäºæ—¶é—´åºåˆ—å˜é‡ä¸­çš„ä¸‹é™å’Œä¸Šé™é˜ˆå€¼æ¥æ£€æµ‹å¼‚å¸¸ã€‚

```py
def detect_anomalies(forecast):
   forecasted = forecast[['ds','trend', 'yhat', 'yhat_lower', 'yhat_upper', 'fact']].copy()
forecasted['anomaly'] = 0
   forecasted.loc[forecasted['fact'] > forecasted['yhat_upper'], 'anomaly'] = 1
   forecasted.loc[forecasted['fact'] < forecasted['yhat_lower'], 'anomaly'] = -1

   forecasted['importance'] = 0
   forecasted.loc[forecasted['anomaly'] ==1, 'importance'] = \
       (forecasted['fact'] - forecasted['yhat_upper'])/forecast['fact']
   forecasted.loc[forecasted['anomaly'] ==-1, 'importance'] = \
       (forecasted['yhat_lower'] - forecasted['fact'])/forecast['fact']

   return forecasted
pred = detect_anomalies(pred)
```

æœ€åï¼Œæˆ‘ä»¬åªéœ€è¦ç»˜åˆ¶ä¸Šè¿°é¢„æµ‹å¹¶å¯è§†åŒ–å¼‚å¸¸ã€‚

***åˆ©å¼Š***

è¯¥ç®—æ³•å¾ˆå¥½åœ°å¤„ç†äº†ä¸åŒçš„å­£èŠ‚æ€§å‚æ•°ï¼Œå¦‚æ¯æœˆæˆ–æ¯å¹´ï¼Œå¹¶ä¸”å®ƒå¯¹æ‰€æœ‰æ—¶é—´åºåˆ—æŒ‡æ ‡éƒ½æœ‰æœ¬åœ°æ”¯æŒã€‚

å¦‚æœä»”ç»†è§‚å¯Ÿï¼Œä¸éš”ç¦»æ—ç®—æ³•ç›¸æ¯”ï¼Œè¯¥ç®—æ³•å¯ä»¥å¾ˆå¥½åœ°å¤„ç†è¾¹ç¼˜æƒ…å†µã€‚

***ç¼ºç‚¹***

ç”±äºè¿™ç§æŠ€æœ¯æ˜¯åŸºäºé¢„æµ‹çš„ï¼Œå®ƒå°†åœ¨æœ‰é™çš„æ•°æ®åœºæ™¯ä¸­æŒ£æ‰ã€‚åœ¨æœ‰é™çš„æ•°æ®ä¸­é¢„æµ‹çš„è´¨é‡ä¼šé™ä½ï¼Œå¼‚å¸¸æ£€æµ‹çš„å‡†ç¡®æ€§ä¹Ÿä¼šé™ä½ã€‚

### åŸºäºèšç±»çš„å¼‚å¸¸æ£€æµ‹

åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»å°† IsolationForest ç®—æ³•è§†ä¸ºæˆ‘ä»¬çš„æ— ç›‘ç£å¼‚å¸¸æ£€æµ‹æ–¹æ³•ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬å°†ç ”ç©¶å¦ä¸€ç§æ— äººç›‘ç®¡çš„æŠ€æœ¯:èšç±»ï¼

è¿™ç§æ–¹æ³•éå¸¸ç®€å•ã€‚è½åœ¨å®šä¹‰çš„èšç±»ä¹‹å¤–çš„æ•°æ®å®ä¾‹å¯èƒ½ä¼šè¢«æ ‡è®°ä¸ºå¼‚å¸¸ã€‚æˆ‘ä»¬å°†ä½¿ç”¨ k-means èšç±»ï¼Œå› ä¸ºä¸ºä»€ä¹ˆä¸å‘¢ï¼

ä¸ºäº†ç›´è§‚èµ·è§ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ä¸€ä¸ªä¸åŒçš„æ•°æ®é›†ï¼Œè¯¥æ•°æ®é›†å¯¹åº”äºå…·æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªåŸºäºæ—¶é—´çš„å˜é‡çš„å¤šå˜é‡æ—¶é—´åºåˆ—ã€‚æ•°æ®é›†å°†æ˜¯åœ¨è¿™é‡Œæ‰¾åˆ°çš„æ•°æ®é›†çš„å­é›†(åˆ—/ç‰¹å¾æ˜¯ç›¸åŒçš„)ã€‚

*æ•°æ®é›†æè¿°:æ•°æ®åŒ…å«è´­ç‰©å’Œè´­ä¹°ä¿¡æ¯ä»¥åŠä»·æ ¼ç«äº‰åŠ›ä¿¡æ¯ã€‚*

ç°åœ¨ä¸ºäº†å¤„ç† k-meansï¼Œé¦–å…ˆæˆ‘ä»¬éœ€è¦çŸ¥é“æˆ‘ä»¬å°†è¦å¤„ç†çš„èšç±»çš„æ•°é‡ã€‚*è‚˜æ³•*åœ¨è¿™æ–¹é¢éå¸¸æœ‰æ•ˆã€‚

*Elbow æ–¹æ³•æ˜¯èšç±»æ•°ä¸è§£é‡Šçš„æ–¹å·®/ç›®æ ‡/å¾—åˆ†çš„å…³ç³»å›¾*

ä¸ºäº†å®ç°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ scikit-learn çš„ K-means å®ç°ã€‚

```py
data = df[['price_usd', 'srch_booking_window', 'srch_saturday_night_bool']]
n_cluster = range(1, 20)
kmeans = [KMeans(n_clusters=i).fit(data) for i in n_cluster]
scores = [kmeans[i].score(data) for i in range(len(kmeans))]
fig, ax = plt.subplots(figsize=(10,6))
ax.plot(n_cluster, scores)
plt.xlabel('Number of Clusters')
plt.ylabel('Score')
plt.title('Elbow Curve')
plt.show();
```

ä»ä¸Šé¢çš„è‚˜å½¢æ›²çº¿ä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°è¯¥å›¾åœ¨ 10 ä¸ªèšç±»ä¹‹åå˜å¾—å¹³ç¨³ï¼Œè¿™æ„å‘³ç€æ›´å¤šèšç±»çš„å¢åŠ å¹¶ä¸èƒ½è§£é‡Šæˆ‘ä»¬çš„ç›¸å…³å˜é‡ä¸­æ›´å¤šçš„å˜åŒ–ï¼›åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä»·æ ¼ä¸ºç¾å…ƒã€‚

æˆ‘ä»¬è®¾ç½® n_clusters=10ï¼Œåœ¨ç”Ÿæˆ k-means è¾“å‡ºæ—¶ï¼Œä½¿ç”¨è¯¥æ•°æ®æ¥ç»˜åˆ¶ 3D èšç±»ã€‚

**ç°åœ¨æˆ‘ä»¬éœ€è¦æ‰¾å‡º**è¦ä¿ç•™çš„ç»„ä»¶(ç‰¹æ€§)çš„æ•°é‡ã€‚

```py
data = df[['price_usd', 'srch_booking_window', 'srch_saturday_night_bool']]
X = data.values
X_std = StandardScaler().fit_transform(X)

mean_vec = np.mean(X_std, axis=0)
cov_mat = np.cov(X_std.T)
eig_vals, eig_vecs = np.linalg.eig(cov_mat)

eig_pairs = [ (np.abs(eig_vals[i]),eig_vecs[:,i]) for i in range(len(eig_vals))]
eig_pairs.sort(key = lambda x: x[0], reverse= True)

tot = sum(eig_vals)
var_exp = [(i/tot)*100 for i in sorted(eig_vals, reverse=True)] 
cum_var_exp = np.cumsum(var_exp) 
plt.figure(figsize=(10, 5))
plt.bar(range(len(var_exp)), var_exp, alpha=0.3, align='center', label='individual explained variance', color = 'y')
plt.step(range(len(cum_var_exp)), cum_var_exp, where='mid',label='cumulative explained variance')
plt.ylabel('Explained variance ratio')
plt.xlabel('Principal components')
plt.legend(loc='best')
plt.show();
```

![Anomaly detection components](img/6c3a1e14bfb129399c2de24c61da6e74.png)

æˆ‘ä»¬çœ‹åˆ°ç¬¬ä¸€ä¸ªå› ç´ è§£é‡Šäº†å°†è¿‘ 50%çš„å·®å¼‚ã€‚ç¬¬äºŒä¸ªæˆåˆ†è§£é‡Šäº† 30%ä»¥ä¸Šã€‚ä½†æ˜¯ï¼Œè¯·æ³¨æ„ï¼Œå‡ ä¹æ²¡æœ‰ä¸€ä¸ªç»„ä»¶æ˜¯çœŸæ­£å¯ä»¥å¿½ç•¥çš„ã€‚å‰ä¸¤ä¸ªç»„ä»¶åŒ…å« 80%ä»¥ä¸Šçš„ä¿¡æ¯ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å°†è®¾ç½® n_components=2ã€‚

åŸºäºèšç±»çš„å¼‚å¸¸æ£€æµ‹çš„åŸºæœ¬å‡è®¾æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬å¯¹æ•°æ®è¿›è¡Œèšç±»ï¼Œæ­£å¸¸æ•°æ®å°†å±äºèšç±»ï¼Œè€Œå¼‚å¸¸å°†ä¸å±äºä»»ä½•èšç±»ï¼Œæˆ–è€…å±äºå°èšç±»ã€‚

**æˆ‘ä»¬ä½¿ç”¨ä»¥ä¸‹æ­¥éª¤æ¥å‘ç°å¹¶å¯è§†åŒ–å¼‚å¸¸:**

*   è®¡ç®—æ¯ä¸ªç‚¹ä¸å…¶æœ€è¿‘è´¨å¿ƒä¹‹é—´çš„è·ç¦»ã€‚æœ€å¤§çš„è·ç¦»è¢«è®¤ä¸ºæ˜¯å¼‚å¸¸ã€‚
*   ç±»ä¼¼äº IsolationForest ç®—æ³•ï¼Œæˆ‘ä»¬ä½¿ç”¨ outliers_fraction å‘ç®—æ³•æä¾›å…³äºæ•°æ®é›†ä¸­å‡ºç°çš„ç¦»ç¾¤å€¼çš„æ¯”ä¾‹çš„ä¿¡æ¯ã€‚è¿™åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šæ˜¯ä¸€ä¸ªè¶…å‚æ•°ï¼Œéœ€è¦ç‚¹å‡»/å°è¯•æˆ–ç½‘æ ¼æœç´¢æ¥è®¾ç½®æ­£ç¡®-ä½œä¸ºä¸€ä¸ªå¼€å§‹æ•°å­—ï¼Œè®©æˆ‘ä»¬ä¼°è®¡ï¼Œç¦»ç¾¤å€¼åˆ†æ•°=0.1
*   ä½¿ç”¨ç¦»ç¾¤å€¼åˆ†æ•°è®¡ç®—ç¦»ç¾¤å€¼çš„æ•°é‡ã€‚
*   å°†é˜ˆå€¼è®¾ç½®ä¸ºè¿™äº›å¼‚å¸¸å€¼çš„æœ€å°è·ç¦»ã€‚
*   anomaly1 çš„å¼‚å¸¸ç»“æœåŒ…å«ä¸Šè¿°æ–¹æ³•ç°‡(0:æ­£å¸¸ï¼Œ1:å¼‚å¸¸)ã€‚
*   ä½¿ç”¨é›†ç¾¤è§†å›¾å¯è§†åŒ–å¼‚å¸¸ã€‚
*   ç”¨æ—¶åºè§†å›¾å¯è§†åŒ–å¼‚å¸¸ã€‚

```py
def getDistanceByPoint(data, model):
   distance = pd.Series()
   for i in range(0,len(data)):
       Xa = np.array(data.loc[i])
       Xb = model.cluster_centers_[model.labels_[i]-1]
       distance.at[i]=np.linalg.norm(Xa-Xb)
   return distance
outliers_fraction = 0.1

distance = getDistanceByPoint(data, kmeans[9])
number_of_outliers = int(outliers_fraction*len(distance))
threshold = distance.nlargest(number_of_outliers).min()

df['anomaly1'] = (distance >= threshold).astype(int)
fig, ax = plt.subplots(figsize=(10,6))
colors = {0:'blue', 1:'red'}
ax.scatter(df['principal_feature1'], df['principal_feature2'], c=df["anomaly1"].apply(lambda x: colors[x]))
plt.xlabel('principal feature1')
plt.ylabel('principal feature2')
plt.show();
```

**ç°åœ¨ï¼Œä¸ºäº†æŸ¥çœ‹ç°å®ä¸–ç•Œç‰¹å¾çš„å¼‚å¸¸**ï¼Œæˆ‘ä»¬å¤„ç†ä¸Šä¸€æ­¥åˆ›å»ºçš„æ•°æ®å¸§ã€‚

```py
df = df.sort_values('date_time')
fig, ax = plt.subplots(figsize=(10,6))
a = df.loc[df['anomaly1'] == 1, ['date_time', 'price_usd']] 
ax.plot(pd.to_datetime(df['date_time']), df['price_usd'], color='k',label='Normal')
ax.scatter(pd.to_datetime(a['date_time']),a['price_usd'], color='red', label='Anomaly')
ax.xaxis_date()
plt.xlabel('Date Time')
plt.ylabel('price in USD')
plt.legend()
fig.autofmt_xdate()
plt.show()
```

è¿™ç§æ–¹æ³•èƒ½å¤Ÿå¾ˆå¥½åœ°å°è£…å³°ï¼Œå½“ç„¶ä¹Ÿæœ‰ä¸€äº›é—æ¼ã€‚è¿™ä¸ªé—®é¢˜çš„ä¸€éƒ¨åˆ†å¯èƒ½æ˜¯ outlier_fraction æ²¡æœ‰å¤„ç†å¾ˆå¤šå€¼ã€‚

***åˆ©å¼Š***

è¿™ç§æŠ€æœ¯çš„æœ€å¤§ä¼˜åŠ¿ç±»ä¼¼äºå…¶ä»–æ— ç›‘ç£æŠ€æœ¯ï¼Œå³æ‚¨å¯ä»¥å¼•å…¥ä»»æ„å¤šçš„éšæœºå˜é‡æˆ–ç‰¹å¾æ¥åˆ¶ä½œæ›´å¤æ‚çš„æ¨¡å‹ã€‚

***ç¼ºç‚¹***

ç¼ºç‚¹æ˜¯è¶Šæ¥è¶Šå¤šçš„ç‰¹æ€§ä¼šå¾ˆå¿«å½±å“ä½ çš„è®¡ç®—æ€§èƒ½ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰æ›´å¤šçš„è¶…å‚æ•°éœ€è¦è°ƒæ•´å’Œè·å¾—æ­£ç¡®çš„ç»“æœï¼Œå› æ­¤åœ¨æ€§èƒ½æ–¹é¢æ€»æ˜¯æœ‰å¾ˆå¤§çš„æ¨¡å‹å·®å¼‚ã€‚

### è‡ªåŠ¨ç¼–ç å™¨

æ²¡æœ‰æ·±åº¦å­¦ä¹ å°±è°ˆä¸ä¸Šæ•°æ®æŠ€æœ¯ï¼å› æ­¤ï¼Œè®©æˆ‘ä»¬è®¨è®ºä½¿ç”¨**è‡ªåŠ¨ç¼–ç å™¨çš„å¼‚å¸¸æ£€æµ‹ã€‚**

è‡ªåŠ¨ç¼–ç å™¨æ˜¯ä¸€ç§æ— ç›‘ç£çš„æŠ€æœ¯ï¼Œå®ƒåœ¨é€šè¿‡ä¸åŒçš„ç»´åº¦æå–å…¶ç‰¹å¾çš„åŒæ—¶é‡æ–°åˆ›å»ºè¾“å…¥æ•°æ®ã€‚å› æ­¤ï¼Œæ¢å¥è¯è¯´ï¼Œå¦‚æœæˆ‘ä»¬ä½¿ç”¨æ¥è‡ªè‡ªåŠ¨ç¼–ç å™¨çš„æ•°æ®çš„æ½œåœ¨è¡¨ç¤ºï¼Œå®ƒå¯¹åº”äº*ç»´åº¦ç¼©å‡*ã€‚

#### ä¸ºä»€ä¹ˆæˆ‘ä»¬è¦åº”ç”¨é™ç»´æ¥å‘ç°å¼‚å¸¸å€¼ï¼Ÿ

å¦‚æœæˆ‘ä»¬é™ä½ç»´åº¦ï¼Œä¼šä¸ä¼šä¸¢å¤±ä¸€äº›ä¿¡æ¯ï¼ŒåŒ…æ‹¬ç¦»ç¾¤å€¼ï¼Ÿç­”æ¡ˆæ˜¯ï¼Œä¸€æ—¦ç¡®å®šäº†ä¸»è¦æ¨¡å¼ï¼Œç¦»ç¾¤å€¼å°±æ˜¾ç°å‡ºæ¥äº†ã€‚è®¸å¤šåŸºäºè·ç¦»çš„æŠ€æœ¯(ä¾‹å¦‚ KNNs)åœ¨è®¡ç®—æ•´ä¸ªç‰¹å¾ç©ºé—´ä¸­æ¯ä¸ªæ•°æ®ç‚¹çš„è·ç¦»æ—¶ä¼šé­é‡ç»´æ•°ç¾éš¾ã€‚å¿…é¡»å‡å°‘é«˜ç»´åº¦ã€‚

æœ‰è¶£çš„æ˜¯ï¼Œåœ¨é™ç»´çš„è¿‡ç¨‹ä¸­ï¼Œç¦»ç¾¤å€¼è¢«è¯†åˆ«å‡ºæ¥ã€‚æˆ‘ä»¬å¯ä»¥è¯´ç¦»ç¾¤ç‚¹æ£€æµ‹æ˜¯é™ç»´çš„å‰¯äº§å“ã€‚

è‡ªåŠ¨ç¼–ç å™¨æ˜¯ä¸€ç§æ— ç›‘ç£çš„å‘ç°å¼‚å¸¸çš„æ–¹æ³•ã€‚

#### ä¸ºä»€ä¹ˆé€‰æ‹©è‡ªåŠ¨ç¼–ç å™¨ï¼Ÿ

æœ‰è®¸å¤šæœ‰ç”¨çš„å·¥å…·ï¼Œå¦‚ä¸»æˆåˆ†åˆ†æ(PCA)ï¼Œç”¨äºæ£€æµ‹å¼‚å¸¸å€¼ã€‚ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦è‡ªåŠ¨ç¼–ç å™¨ï¼ŸåŸå› æ˜¯ PCA ç”¨çº¿æ€§ä»£æ•°æ¥å˜æ¢ã€‚ç›¸åï¼Œè‡ªåŠ¨ç¼–ç å™¨æŠ€æœ¯å¯ä»¥åˆ©ç”¨å…¶éçº¿æ€§æ¿€æ´»åŠŸèƒ½å’Œå¤šå±‚æ¥æ‰§è¡Œéçº¿æ€§å˜æ¢ã€‚ç”¨è‡ªåŠ¨ç¼–ç å™¨è®­ç»ƒå‡ ä¸ªå±‚æ¯”ç”¨ PCA è®­ç»ƒä¸€ä¸ªå·¨å¤§çš„å˜æ¢æ›´æœ‰æ•ˆã€‚å› æ­¤ï¼Œå½“æ•°æ®é—®é¢˜æœ¬è´¨ä¸Šæ˜¯å¤æ‚çš„å’Œéçº¿æ€§çš„æ—¶ï¼Œè‡ªåŠ¨ç¼–ç å™¨æŠ€æœ¯æ˜¾ç¤ºäº†å®ƒä»¬çš„ä¼˜ç‚¹ã€‚

#### å»ºç«‹æ¨¡å‹

æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Tensorflow æˆ– Pytorch ç­‰æµè¡Œçš„æ¡†æ¶æ¥å®ç°è‡ªåŠ¨ç¼–ç å™¨ï¼Œä½†ä¸ºäº†ç®€å•èµ·è§ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ä¸€ä¸ªåä¸º PyOD çš„ python æ¨¡å—ï¼Œå®ƒä½¿ç”¨ç”¨æˆ·çš„å°‘é‡è¾“å…¥åœ¨å†…éƒ¨æ„å»ºè‡ªåŠ¨ç¼–ç å™¨ã€‚

å¯¹äºæ•°æ®éƒ¨åˆ†ï¼Œè®©æˆ‘ä»¬ä½¿ç”¨ PyOD çš„å®ç”¨å‡½æ•° generate_data()æ¥ç”Ÿæˆ 25 ä¸ªå˜é‡ã€500 ä¸ªè§‚å¯Ÿå€¼å’Œ 10%çš„å¼‚å¸¸å€¼ã€‚

```py
import numpy as np
import pandas as pd
from pyod.models.auto_encoder import AutoEncoder
from pyod.utils.data import generate_data
contamination = 0.1  
n_train = 500  
n_test = 500  
n_features = 25 
X_train, y_train, X_test, y_test = generate_data(
   n_train=n_train, n_test=n_test,
   n_features= n_features,
   contamination=contamination,random_state=1234)
X_train = pd.DataFrame(X_train)
X_test = pd.DataFrame(X_test)
```

å½“æ‚¨è¿›è¡Œæ— ç›‘ç£å­¦ä¹ æ—¶ï¼Œæ ‡å‡†åŒ–é¢„æµ‹å€¼æ€»æ˜¯ä¸€ä¸ªå®‰å…¨çš„æ­¥éª¤ï¼Œå¦‚ä¸‹æ‰€ç¤º:

```py
from sklearn.preprocessing import StandardScaler
X_train = StandardScaler().fit_transform(X_train)
X_train = pd.DataFrame(X_train)
X_test = StandardScaler().fit_transform(X_test)
X_test = pd.DataFrame(X_test)
```

ä¸ºäº†æ›´å¥½åœ°ç†è§£æ•°æ®çš„æ ·å­ï¼Œè®©æˆ‘ä»¬ä½¿ç”¨ä¸»æˆåˆ†åˆ†ææ³•å°†æ•°æ®é™ç»´ï¼Œå¹¶ç›¸åº”åœ°ç»˜å›¾ã€‚

```py
from sklearn.decomposition import PCA
pca = PCA(2)
x_pca = pca.fit_transform(X_train)
x_pca = pd.DataFrame(x_pca)
x_pca.columns=['PC1','PC2']
cdict = {0: 'red', 1: 'blue'}

import matplotlib.pyplot as plt
plt.scatter(X_train[0], X_train[1], c=y_train, alpha=1)
plt.title('Scatter plot')
plt.xlabel('x')
plt.ylabel('y')
plt.show()
```

èšé›†åœ¨ä¸€èµ·çš„é»‘ç‚¹æ˜¯å…¸å‹çš„è§‚å¯Ÿå€¼ï¼Œè€Œé»„ç‚¹æ˜¯å¼‚å¸¸å€¼ã€‚

#### æ¨¡å‹è®¾å®š

*   [25, 2, 2, 25].è¾“å…¥å±‚å’Œè¾“å‡ºå±‚å„æœ‰ 25 ä¸ªç¥ç»å…ƒã€‚æœ‰ä¸¤ä¸ªéšè—å±‚ï¼Œæ¯ä¸ªéƒ½æœ‰ä¸¤ä¸ªç¥ç»å…ƒã€‚

**æ­¥éª¤ 1â€”â€”æ„å»ºæ‚¨çš„æ¨¡å‹**

```py
clf = AutoEncoder(hidden_neurons =[25, 2, 2, 25])
clf.fit(X_train)
```

**æ­¥éª¤ 2â€”â€”ç¡®å®šåˆ‡å‰²ç‚¹**

è®©æˆ‘ä»¬åº”ç”¨è®­ç»ƒå¥½çš„æ¨¡å‹ *Clf* æ¥é¢„æµ‹æµ‹è¯•æ•°æ®ä¸­æ¯ä¸ªè§‚å¯Ÿå€¼çš„å¼‚å¸¸åˆ†æ•°ã€‚æˆ‘ä»¬å¦‚ä½•å®šä¹‰ç¦»ç¾¤å€¼ï¼Ÿå¼‚å¸¸å€¼æ˜¯æŒ‡è¿œç¦»å…¶ä»–ç‚¹çš„ç‚¹ï¼Œå› æ­¤å¼‚å¸¸å€¼åˆ†æ•°ç”±è·ç¦»å®šä¹‰ã€‚PyOD å‡½æ•°ã€‚decision_function()è®¡ç®—æ¯ä¸ªæ•°æ®ç‚¹çš„è·ç¦»æˆ–å¼‚å¸¸å€¼ã€‚

```py
y_train_scores = clf.decision_scores_

y_test_scores = clf.decision_function(X_test)  
y_test_scores = pd.Series(y_test_scores)

import matplotlib.pyplot as plt
plt.hist(y_test_scores, bins='auto') 
plt.title("Histogram for Model Clf1 Anomaly Scores")
plt.show()
```

å¦‚æœæˆ‘ä»¬ä½¿ç”¨ç›´æ–¹å›¾é€šè¿‡å¼‚å¸¸åˆ†æ•°æ¥è®¡ç®—é¢‘ç‡ï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ°é«˜åˆ†æ•°å¯¹åº”äºä½é¢‘ç‡â€”â€”å¼‚å¸¸å€¼çš„è¯æ®ã€‚æˆ‘ä»¬é€‰æ‹© 4.0 ä½œä¸ºåˆ†ç•Œç‚¹ï¼Œé‚£äº›> =4.0 çš„ä¸ºå¼‚å¸¸å€¼ã€‚

**æ­¥éª¤ 3 â€”æŒ‰é›†ç¾¤è·å–æ±‡æ€»ç»Ÿè®¡æ•°æ®**

è®©æˆ‘ä»¬å°†é‚£äº›å¼‚å¸¸åˆ†æ•°ä½äº 4.0 çš„è§‚å¯Ÿå€¼åˆ†é…åˆ°èšç±» 0ï¼Œå°†é‚£äº›é«˜äº 4.0 çš„è§‚å¯Ÿå€¼åˆ†é…åˆ°èšç±» 1ã€‚åŒæ ·ï¼Œè®©æˆ‘ä»¬ä½¿ç”¨ã€‚groupby()ã€‚è¯¥æ¨¡å‹å·²ç»è¯†åˆ«äº† 50 ä¸ªå¼‚å¸¸å€¼(æœªç¤ºå‡º)ã€‚

```py
df_test = X_test.copy()
df_test['score'] = y_test_scores
df_test['cluster'] = np.where(df_test['score']<4, 0, 1)
df_test['cluster'].value_counts()
df_test.groupby('cluster').mean()
```

ä»¥ä¸‹è¾“å‡ºæ˜¾ç¤ºäº†æ¯ä¸ªèšç±»ä¸­çš„å¹³å‡å˜é‡å€¼ã€‚åˆ†ç±»â€œ1â€(å¼‚å¸¸åˆ†ç±»)çš„å€¼ä¸åˆ†ç±»â€œ0â€(æ­£å¸¸åˆ†ç±»)çš„å€¼å¤§ä¸ç›¸åŒã€‚â€œå¾—åˆ†â€å€¼æ˜¾ç¤ºäº†è¿™äº›è§‚å¯Ÿåˆ°çš„å…¶ä»–äººçš„å¹³å‡è·ç¦»ã€‚é«˜â€œåˆ†â€æ„å‘³ç€è§‚å¯Ÿè¿œç¦»å¸¸æ€ã€‚

![Anomaly detection cluster](img/1775737de6bdfbb797a8a0b9c5ce007b.png)

è¿™æ ·ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆå¥½åœ°åŒºåˆ†å’Œæ ‡è®°å…¸å‹åŸºå‡†é¢å’Œå¼‚å¸¸ã€‚

***åˆ©å¼Š***

*   è‡ªåŠ¨ç¼–ç å™¨å¯ä»¥è½»æ¾å¤„ç†é«˜ç»´æ•°æ®ã€‚
*   ç”±äºå…¶éçº¿æ€§è¡Œä¸ºï¼Œå®ƒå¯ä»¥åœ¨é«˜ç»´æ•°æ®é›†ä¸­å‘ç°å¤æ‚çš„æ¨¡å¼ã€‚

***ç¼ºç‚¹***

*   ç”±äºè¿™æ˜¯ä¸€ç§åŸºäºæ·±åº¦å­¦ä¹ çš„ç­–ç•¥ï¼Œå¦‚æœæ•°æ®è¾ƒå°‘ï¼Œå®ƒå°†ç‰¹åˆ«å›°éš¾ã€‚
*   å¦‚æœç½‘ç»œæ·±åº¦å¢åŠ ï¼Œåœ¨å¤„ç†å¤§æ•°æ®æ—¶ï¼Œè®¡ç®—æˆæœ¬å°†ä¼šé£™å‡ã€‚

åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»çœ‹åˆ°äº†å¦‚ä½•æ£€æµ‹å’Œè¯†åˆ«å¼‚å¸¸ã€‚ä½†æ˜¯çœŸæ­£çš„é—®é¢˜å‡ºç°åœ¨æ‰¾åˆ°ä»–ä»¬ä¹‹åã€‚ç°åœ¨æ€ä¹ˆåŠï¼Ÿæˆ‘ä»¬è¯¥æ€ä¹ˆåŠï¼Ÿ

è®©æˆ‘ä»¬è®¨è®ºä¸€äº›æ‚¨å¯ä»¥åœ¨æ‚¨çš„åœºæ™¯ä¸­åº”ç”¨çš„è¦ç‚¹ã€‚

## å¦‚ä½•å¤„ç†å¼‚å¸¸æƒ…å†µï¼Ÿ

æ£€æµ‹ä¹‹åï¼Œä¸€ä¸ªå¤§é—®é¢˜æ˜¯å¦‚ä½•å¤„ç†æˆ‘ä»¬è¯†åˆ«å‡ºçš„ä¸œè¥¿ã€‚æœ‰è®¸å¤šæ–¹æ³•æ¥å¤„ç†æ–°å‘ç°çš„ä¿¡æ¯ã€‚æˆ‘å°†æ ¹æ®æˆ‘çš„ç»éªŒåˆ—å‡ºå…¶ä¸­çš„ä¸€äº›æ¥å¸®åŠ©ä½ è§£å†³è¿™ä¸ªé—®é¢˜ã€‚

### ç†è§£ä¸šåŠ¡æ¡ˆä¾‹

å¼‚å¸¸å‡ ä¹æ€»æ˜¯ä¸ºä½ çš„é—®é¢˜æä¾›æ–°çš„ä¿¡æ¯å’Œè§†è§’ã€‚è‚¡ç¥¨ä»·æ ¼çªç„¶ä¸Šæ¶¨ï¼Ÿè¿™è‚¯å®šæ˜¯æœ‰åŸå› çš„ï¼Œå°±åƒæˆ‘ä»¬åœ¨ Gamestop çœ‹åˆ°çš„é‚£æ ·ï¼Œç–«æƒ…å¯èƒ½æ˜¯å¦ä¸€ä¸ªåŸå› ã€‚å› æ­¤ï¼Œäº†è§£å³°å€¼èƒŒåçš„åŸå› å¯ä»¥å¸®åŠ©ä½ ä»¥æœ‰æ•ˆçš„æ–¹å¼è§£å†³é—®é¢˜ã€‚

ç†è§£ä¸šåŠ¡ç”¨ä¾‹è¿˜å¯ä»¥å¸®åŠ©æ‚¨æ›´å¥½åœ°è¯†åˆ«é—®é¢˜ã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯èƒ½æ­£åœ¨è¿›è¡ŒæŸç§æ¬ºè¯ˆæ£€æµ‹ï¼Œè¿™æ„å‘³ç€æ‚¨çš„ä¸»è¦ç›®æ ‡ç¡®å®æ˜¯äº†è§£æ•°æ®ä¸­çš„å¼‚å¸¸å€¼ã€‚

å¦‚æœè¿™äº›éƒ½ä¸æ˜¯ä½ æ‰€å…³å¿ƒçš„ï¼Œä½ å¯ä»¥ç§»é™¤æˆ–å¹³æ»‘ç¦»ç¾¤å€¼ã€‚

### è°ƒæ•´å¼‚å¸¸å€¼çš„ç»Ÿè®¡æ–¹æ³•

ç»Ÿè®¡æ–¹æ³•å…è®¸æ‚¨è°ƒæ•´å¼‚å¸¸å€¼ä»¥åŒ¹é…åŸå§‹åˆ†å¸ƒã€‚è®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªä½¿ç”¨å‡å€¼å¹³æ»‘å¼‚å¸¸çš„æ–¹æ³•ã€‚

#### ä½¿ç”¨å‡å€¼å¹³æ»‘å¼‚å¸¸å€¼

è¿™ä¸ªæƒ³æ³•æ˜¯é€šè¿‡ä½¿ç”¨å‰ä¸€ä¸ªæ—¥æœŸæ—¶é—´çš„æ•°æ®æ¥å¹³æ»‘å¼‚å¸¸ã€‚ä¾‹å¦‚ï¼Œä¸ºäº†å¹³è¡¡ç”±äºæ‚¨å®¶ä¸­å‘ç”Ÿçš„äº‹ä»¶è€Œå¯¼è‡´çš„çªç„¶ç”¨ç”µé‡ï¼Œæ‚¨å¯ä»¥å–å‰å‡ å¹´åŒä¸€ä¸ªæœˆçš„å¹³å‡ç”¨ç”µé‡ã€‚

è®©æˆ‘ä»¬å®ç°åŒæ ·çš„æ–¹æ³•æ¥è·å¾—ä¸€ä¸ªæ¸…æ™°çš„å›¾åƒã€‚æˆ‘ä»¬å°†ä½¿ç”¨ä¸ä¹‹å‰ç›¸åŒçš„é²¶é±¼é”€å”®æ•°æ®ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„è„šæœ¬æ¥è°ƒæ•´**å¹³å‡å€¼**ã€‚

```py
adjusted_data = lim_catfish_sales.copy()
adjusted_data.loc[curr_anomaly] = december_data[(december_data.index != curr_anomaly) & (december_data.index < test_data.index[0])].mean()
```

**ç»˜åˆ¶è°ƒæ•´åçš„æ•°æ®**å’Œæ—§æ•°æ®å°†å¦‚ä¸‹æ‰€ç¤º:

```py
plt.figure(figsize=(10,4))
plt.plot(lim_catfish_sales, color='firebrick', alpha=0.4)
plt.plot(adjusted_data)
plt.title('Catfish Sales in 1000s of Pounds', fontsize=20)
plt.ylabel('Sales', fontsize=16)
for year in range(start_date.year,end_date.year):
   plt.axvline(pd.to_datetime(str(year)+'-01-01'), color='k', linestyle='--', alpha=0.2)
plt.axvline(curr_anomaly, color='k', alpha=0.7)
```

è¿™æ ·ï¼Œæ‚¨å¯ä»¥ç»§ç»­åº”ç”¨é¢„æµ‹æˆ–åˆ†æï¼Œè€Œä¸å¿…å¤ªæ‹…å¿ƒç»“æœçš„åæ–œã€‚

æœ‰è®¸å¤šæ–¹æ³•å¯ä»¥å¤„ç†éæ—¶é—´åºåˆ—æ•°æ®ï¼Œä½†ä¸å¹¸çš„æ˜¯ï¼Œç”±äºåº•å±‚ç»“æ„çš„å·®å¼‚ï¼Œè¿™äº›æ–¹æ³•ä¸èƒ½ç›´æ¥ç”¨äºæ—¶é—´åºåˆ—ã€‚éæ—¶é—´åºåˆ—å¤„ç†æ–¹æ³•æ¶‰åŠè®¸å¤šåŸºäºåˆ†å¸ƒçš„æ–¹æ³•ï¼Œè¿™äº›æ–¹æ³•ä¸èƒ½ç®€å•åœ°è½¬åŒ–ä¸ºæ—¶é—´åºåˆ—æ•°æ®ã€‚å¦‚æœä½ æƒ³çœ‹å…¶ä¸­çš„ä¸€äº›ï¼Œä½ å¯ä»¥ç‚¹å‡»è¿™é‡Œçš„ã€‚

### å»é™¤å¼‚å¸¸å€¼

å¦‚æœä»¥ä¸Šä¸¤ä¸ªé€‰é¡¹éƒ½æ²¡æœ‰åœ¨æ‚¨çš„è§£å†³æ–¹æ¡ˆä¸­å¼•å‘ä»»ä½•äº‰è®ºï¼Œé‚£ä¹ˆæœ€åä¸€ä¸ªé€‰é¡¹æ˜¯æ¶ˆé™¤å¼‚å¸¸ã€‚ä¸å»ºè®®è¿™æ ·åš(å› ä¸ºæ‚¨åŸºæœ¬ä¸Šæ˜¯åœ¨å»é™¤ä¸€äº›æ½œåœ¨çš„æœ‰ä»·å€¼çš„ä¿¡æ¯)ï¼Œé™¤éè¿™æ˜¯ç»å¯¹å¿…è¦çš„ï¼Œå¹¶ä¸”ä¸ä¼šæŸå®³æœªæ¥çš„åˆ†æã€‚

æ‚¨å¯ä»¥ä½¿ç”¨ã€‚ç†ŠçŒ«è¯†åˆ«åæ‰è½()ç‰¹å¾ã€‚å®ƒä¼šä¸ºä½ åšç¹é‡çš„å·¥ä½œã€‚

## ä½ å·²ç»åˆ°è¾¾ç»ˆç‚¹äº†ï¼

æ­å–œä½ ï¼ç°åœ¨ï¼Œæ‚¨å·²ç»äº†è§£äº†å¼‚å¸¸æƒ…å†µã€å¦‚ä½•æ£€æµ‹å¼‚å¸¸æƒ…å†µä»¥åŠå¦‚ä½•åº”å¯¹å¼‚å¸¸æƒ…å†µã€‚å°‘æ•°å°¾æ³¨:

*   æ—¶é—´åºåˆ—æ•°æ®å› å•†ä¸šæ¡ˆä¾‹çš„ä¸åŒè€Œæœ‰å¾ˆå¤§å·®å¼‚ï¼Œå› æ­¤æœ€å¥½è¿›è¡Œè¯•éªŒå¹¶æ‰¾å‡ºå¯è¡Œçš„æ–¹æ³•ï¼Œè€Œä¸æ˜¯ä»…ä»…åº”ç”¨æ‚¨çš„å‘ç°ã€‚ç»éªŒå¯ä»¥åˆ›é€ å¥‡è¿¹ï¼
*   é™¤äº†æˆ‘ä»¬åœ¨è¿™ä¸ªåšå®¢ä¸Šè®¨è®ºçš„ä»¥å¤–ï¼Œè¿˜æœ‰å¤§é‡çš„å¼‚å¸¸æ£€æµ‹æŠ€æœ¯ã€‚æˆ‘é¼“åŠ±ä½ å¤šé˜…è¯»ç ”ç©¶è®ºæ–‡ã€‚

ä½ å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°å®Œæ•´çš„ç¬”è®°æœ¬ä»£ç å’Œä¸€äº›é¢å¤–çš„ä¸œè¥¿ï¼

ç›®å‰å°±è¿™äº›ï¼Œæ•¬è¯·å…³æ³¨æ›´å¤šï¼å†è§ï¼

*æ³¨:é™¤éå¦æœ‰è¯´æ˜ï¼Œå›¾ç‰‡å‡ç”±ä½œè€…åˆ›ä½œã€‚*

### Aayush Bajaj

**NatWest Group çš„æ•°æ®ç§‘å­¦å®¶**
ä¸€ä½çƒ­çˆ±è§£å†³å·¥ç¨‹æˆ–ç§‘å­¦æ•°æ®é—®é¢˜çš„æ•°æ®ä¸»ç®¡ã€‚åœ¨è¿™é‡Œï¼Œä½ ä¼šå‘ç°å¾ˆå¤šæ¦‚å¿µåšå®¢ä»¥æœ€å…·è¯´æ˜æ€§çš„æ–¹å¼å’Œæ¡†æ¶ç›¸å…³æ•™ç¨‹è¿›è¡Œäº†è§£é‡Šã€‚å¦‚æœä½ æƒ³çŸ¥é“æœºå™¨å°†å¦‚ä½•æ¥ç®¡ä¸–ç•Œï¼Œè¯·ç»§ç»­å…³æ³¨:)ï¼

* * *

**é˜…è¯»ä¸‹ä¸€ç¯‡**

## ML å®éªŒè·Ÿè¸ª:å®ƒæ˜¯ä»€ä¹ˆï¼Œä¸ºä»€ä¹ˆé‡è¦ï¼Œä»¥åŠå¦‚ä½•å®æ–½

10 åˆ†é’Ÿé˜…è¯»|ä½œè€… Jakub Czakon |å¹´ 7 æœˆ 14 æ—¥æ›´æ–°

æˆ‘æ¥åˆ†äº«ä¸€ä¸ªå¬äº†å¤ªå¤šæ¬¡çš„æ•…äº‹ã€‚

> *â€œâ€¦æˆ‘ä»¬å’Œæˆ‘çš„å›¢é˜Ÿæ­£åœ¨å¼€å‘ä¸€ä¸ª ML æ¨¡å‹ï¼Œæˆ‘ä»¬è¿›è¡Œäº†å¤§é‡çš„å®éªŒï¼Œå¹¶è·å¾—äº†æœ‰å¸Œæœ›çš„ç»“æœâ€¦*
> 
> *â€¦ä¸å¹¸çš„æ˜¯ï¼Œæˆ‘ä»¬æ— æ³•ç¡®åˆ‡åœ°è¯´å‡ºå“ªç§æ€§èƒ½æœ€å¥½ï¼Œå› ä¸ºæˆ‘ä»¬å¿˜è®°äº†ä¿å­˜ä¸€äº›æ¨¡å‹å‚æ•°å’Œæ•°æ®é›†ç‰ˆæœ¬â€¦*
> 
> *â€¦å‡ å‘¨åï¼Œæˆ‘ä»¬ç”šè‡³ä¸ç¡®å®šæˆ‘ä»¬å®é™…å°è¯•äº†ä»€ä¹ˆï¼Œæˆ‘ä»¬éœ€è¦é‡æ–°è¿è¡Œå‡ ä¹æ‰€æœ‰çš„ä¸œè¥¿"*
> 
> ä¸å¹¸çš„ ML ç ”ç©¶å‘˜ã€‚

äº‹å®æ˜¯ï¼Œå½“ä½ å¼€å‘ ML æ¨¡å‹æ—¶ï¼Œä½ ä¼šè¿›è¡Œå¤§é‡çš„å®éªŒã€‚

è¿™äº›å®éªŒå¯èƒ½:

*   ä½¿ç”¨ä¸åŒçš„æ¨¡å‹å’Œæ¨¡å‹è¶…å‚æ•°
*   ä½¿ç”¨ä¸åŒçš„åŸ¹è®­æˆ–è¯„ä¼°æ•°æ®ï¼Œ
*   è¿è¡Œä¸åŒçš„ä»£ç (åŒ…æ‹¬æ‚¨æƒ³è¦å¿«é€Ÿæµ‹è¯•çš„è¿™ä¸ªå°å˜åŒ–)
*   åœ¨ä¸åŒçš„ç¯å¢ƒä¸­è¿è¡Œç›¸åŒçš„ä»£ç (ä¸çŸ¥é“å®‰è£…çš„æ˜¯ PyTorch è¿˜æ˜¯ Tensorflow ç‰ˆæœ¬)

å› æ­¤ï¼Œå®ƒä»¬å¯ä»¥äº§ç”Ÿå®Œå…¨ä¸åŒçš„è¯„ä¼°æŒ‡æ ‡ã€‚

è·Ÿè¸ªæ‰€æœ‰è¿™äº›ä¿¡æ¯ä¼šå¾ˆå¿«å˜å¾—éå¸¸å›°éš¾ã€‚ç‰¹åˆ«æ˜¯å¦‚æœä½ æƒ³ç»„ç»‡å’Œæ¯”è¾ƒè¿™äº›å®éªŒï¼Œå¹¶ä¸”ç¡®ä¿¡ä½ çŸ¥é“å“ªä¸ªè®¾ç½®äº§ç”Ÿäº†æœ€å¥½çš„ç»“æœã€‚

è¿™å°±æ˜¯ ML å®éªŒè·Ÿè¸ªçš„ç”¨æ­¦ä¹‹åœ°ã€‚

[Continue reading ->](/web/20220928190227/https://neptune.ai/blog/ml-experiment-tracking)

* * *