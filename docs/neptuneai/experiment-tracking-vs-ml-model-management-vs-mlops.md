# 实验跟踪 vs 机器学习模型管理 vs MLOps

> 原文：<https://web.archive.org/web/https://neptune.ai/blog/experiment-tracking-vs-ml-model-management-vs-mlops>

机器学习模型从想法到生产需要相当多的步骤。这些步骤可能会变得太复杂、太快。

在本文中，我们将重点剖析模型部署的三个主要方面。

这些是:

*   实验跟踪
*   机器学习模型管理
*   机器学习操作

在文章的最后，你会知道三者之间的区别，以及各自的各个部分。

让我们开始吧。

## 什么是 MLOps

部署机器学习模型涉及一系列工具、原则和实践。它类似于 DevOps，只是它的目标是优化软件开发项目的启动方式。

在机器学习领域，这些工具和实践被称为 MLOps。一般来说，MLOps 是 DevOps 原理在机器学习中的应用。

## MLOps 的组成部分

各个 MLOps 实践可能有所不同，但在该过程中需要完成几个基本部分:

*   开发和管理模型，
*   部署模型，
*   监控。

现在，我们将探讨 MLOps 的不同部分如何协同工作，以确保所有这些方面的成功。本节将重点介绍它们。

### 专题报道

这是一个中央存储库，提供对培训和服务功能的访问。它很重要，因为它:

*   支持重复使用功能，而不是创建新功能，
*   防止使用具有不同定义的相似特征，
*   允许您提供最新的特征值，
*   确保用于培训的功能也在模型服务期间使用。

### 数据版本化

当新数据可用时，机器学习模型总是可以被重新训练。当有新的培训方法时，他们也可以重新接受培训。

根据新数据重新训练模型可能会导致性能下降。在这种情况下，版本控制允许您恢复到以前的模型，并且您将知道哪个版本的数据导致了令人沮丧的性能。版本控制对于法规遵从性以及数据审计也至关重要。

### ML 元数据存储

在这里，所有关于模型执行的信息都被记录下来，以帮助再现和比较。这也有助于检测异常和调试。记录的一些信息包括:

*   用于运行管道的参数，
*   流程的开始和结束时间，
*   链接到管道中使用的各种工件，
*   指向最后一个训练模型的指针，
*   用于训练和测试集的模型评估度量，以便能够与以前的模型进行比较，
*   谁创造了这个模型，
*   当模型被创建时，
*   应用的特征变换，
*   用于创建模型的数据集。

存储模型元数据为您提供了模型搜索能力。例如，您可以根据功能、模型类型和培训日期来搜索模型。这种可搜索性支持管理、分析、实验和跟踪许多模型。

模型元数据允许您比较不同的模型，并决定将哪个模型投入生产。这对于确定团队的进展也是至关重要的，以便确定可能需要更多努力的领域。手动跟踪所有元数据会很快变成一场噩梦。幸运的是，您可以使用 ML 工具从 ML 管道中自动提取元数据，并记录下来。

## 什么是 ML 模型管理

这些实践和方法可以让你更快地试验和开发机器学习模型。在这一节中，我们来看看这是如何工作的。

### 模型服务

活动模型版本可以通过 REST API 提供给目标应用程序。其他 MLOps 系统允许您将模型下载到目标设备上。这样做的好处是，只要有新版本，模型就会在目标设备上自动更新。因此，无论何时您的模型发生变化，您都不需要发布新版本的应用程序。

你也可以为你的模型提供不同的版本，监控它们并选出最好的执行者。

### 模型版本控制

能够及时回到模型的某个状态是至关重要的。要做到这一点，您需要能够对模型开发的各个方面进行版本化。例如:

*   笔记本，
*   使用的数据集，
*   超参数集，
*   代码，
*   神器。

要恢复到以前的模型，您需要能够唯一地识别每个模型实例。在生产过程中，您不能更改模型。每个模型都应该是不可变的。

在生产过程中改变模型可能会导致意想不到的行为，所以很少这样做。版本模型更常见，因为它使您能够根据需要在各种模型版本之间切换。

您可能需要新的型号版本，原因如下:

*   模型架构变化，例如从神经网络到 Scikit-learn 线性回归的变化，
*   超参数变化，
*   特征添加/移除，
*   重新训练模型。

### 模型监控

一旦使用了机器学习模型，就必须对其进行监控。需要监控的主要项目有两个:**模型漂移**和**生产偏斜**。

模型漂移是一种情况，其中被预测的项目的统计属性以无法预测的方式改变。因此，如果训练数据和预测数据的统计属性变得不可预测，模型的性能将会下降。如果你在监控，你将能够捕捉到这个问题并迅速解决它。

当离线模型的性能明显不同于服务模型的性能时，就会发生生产偏斜。这可能是由以下原因造成的:

*   训练中的 bug，
*   服务实现中的错误，
*   训练数据和传递给模型的数据之间不一致。

检测模型漂移和生产偏差将确保您的模型在生产环境中按预期执行。

### 模型再训练

根据模型评估的信息，在需要时总是重新训练模型是很重要的。当新数据可用时，还可以重新训练该模型。

正如在最后一部分中提到的，生产模型容易产生模型漂移和生产偏差。当您在应用程序中注意到这一点时，可以用新数据重新训练模型。因此，您的生产系统应该自动检测模型漂移，并发送触发模型再训练的警报。

也就是说，一些模型可能不会改进，应该被丢弃而不是重新训练，以节省计算资源，这些资源将用于无法改进的模型。

同样，您的系统应该能够自动检测这样的场景，弃用模型，并根据新数据训练新模型。在使用这些模型的所有系统迁移到新系统之前，不推荐使用的模型应该保留在服务器上。

当重新训练模型时，应该使用规则系统。例如，只有当新模型的平均绝对误差低于前一个模型的平均绝对误差时，才应该使用新模型。在这种情况下，应该自动获取并部署新模型。还可以设置规则，以便它们检查误差和/或准确性的某个阈值。

在生产环境中实现规则之前，需要对它们进行审查。您可以在基于 Git 的系统中通过同行评审来做到这一点。这一点至关重要，因为产生错误的规则可能会导致系统停机。

## 什么是实验跟踪

开发高性能的机器学习通常需要重复几次实验。需要对这些实验进行跟踪，以确保可比性和可重复性。

为了实现这一点，需要记录实验元数据。例如代码版本、数据版本等等。正如我们之前提到的，模型管理是当模型进入生产时发生的事情。然而，并不是所有的模型都可以生产，也不是所有的模型都应该生产。

为了获得将被转移到生产中的最佳模型，跟踪所有实验是至关重要的。如果不能再现最佳性能的实验，那将是非常不幸的。记住这一点，让我们看看[实验跟踪](/web/20221206122518/https://neptune.ai/experiment-tracking)的各个部分。

### 模特培训

在这一阶段，你要建立一个培训渠道。管道负责:

*   摄取数据，
*   设计新功能，
*   监控培训过程。

在此阶段，功能将被验证为与功能库中的功能相同。当管道用于真实世界的数据时，使用不同的特征可能会导致问题。管道还确保数据以正确的质量和格式传递给它。

训练可以通过几次实验来完成。你的实验工具会详细记录每个实验。一旦该过程完成，您就可以重现产生最佳性能的实验。此外，通过记录模型本身，您可以立即选择产生最佳性能的模型。

### 模型评估

在这一阶段，模型用以前从未见过的数据进行测试，为部署做好准备。测试数据特征应该类似于培训中使用的特征。否则评估将失败。如果性能很差，那么可以在调整特征和/或数据之后重新训练模型。

### 模型注册表

使用实验工具时，您可以将最佳模型保存到模型注册表中。一旦你得到了最好的模型，这就为服务做好了准备。这取决于您使用的实验工具，但是这种功能应该是现成的。

还需要注意的是，模型注册中心可以在模型管理的再培训阶段使用。一旦有了新模型，就需要更新模型注册中心。

模型注册中心很重要，因为它包含模型元数据。这种元数据很重要，原因有几个:

*   管理模型，
*   遵守您所在地区的监管框架，
*   知道模型是否在生产中运行以及在哪个端点运行。

到目前为止，我们已经走过了很多地方。我们先花点时间，通过技术对比简单总结一下。

## MLOps 与实验跟踪

开发任何机器学习模型，都需要尝试大量的特征、参数和数据集。这可能会产生许多模型。

尽管大多数模型会被丢弃，但跟踪每一个实验是很重要的。因为你不知道为什么一个模型表现得好，而不能复制一个表现得好的模型，这将是非常不幸的。这个过程——运行几个实验并比较它们——就是[实验跟踪](/web/20221206122518/https://neptune.ai/experiment-tracking)的全部内容。一旦您有了想要投入生产的最佳模型，MLOps 就会介入。

## MLOps 与 ML 模型管理

MLOPs 是关于你的机器学习模型的成功部署和服务。简单地说，所有的 MLOps 步骤确保您的模型总是可用的。当您确定模型本身总是可用时，您就需要管理模型本身。

## ML 模型管理与实验跟踪

模型管理的目标是跟踪注册中心中的各种模型，并为它们服务。需要对模型进行监控，以便在性能下降时，可以采取必要的措施。

现在，模型进入模型注册的第一步是通过实验阶段。在这里，您可以对各种模型进行实验，并将表现最好的模型发送到模型注册中心。一旦它出现了，当情况需要时，你总是可以触发再训练和重塑。有鉴于此，实验跟踪和模型管理是两个相互依赖的过程。

在本文中，您已经看到 MLOps 是与将您的机器[学习模型投入生产相关的整个生态系统。你也看到了 MLOps 各个方面的区别，比如模型管理和实验跟踪](/web/20221206122518/https://neptune.ai/experiment-tracking)。具体来说，我们涵盖了:

*   什么是 MLOps，
*   部分 MLOps，
*   什么是模型管理，
*   模型管理的各个部分，
*   什么是实验跟踪，
*   部分实验跟踪。

我希望这些信息对你的下一个模型有所帮助。

快乐大厦！